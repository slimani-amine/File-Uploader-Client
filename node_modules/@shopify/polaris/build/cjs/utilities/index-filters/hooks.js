'use strict';

var React = require('react');
var context = require('./context.js');

function useSetIndexFiltersMode(initialValue) {
  const indexFiltersMode = React.useContext(context.IndexFiltersModeContext);
  if (!indexFiltersMode) {
    throw new Error('No index filters manager was provided. Your application must be wrapped in an <AppProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.');
  }
  const {
    mode,
    setMode
  } = indexFiltersMode;
  const hasMounted = React.useRef(false);
  if (!hasMounted.current) {
    if (initialValue) {
      setMode(initialValue);
    }
    hasMounted.current = true;
  }
  return {
    mode,
    setMode
  };
}

exports.useSetIndexFiltersMode = useSetIndexFiltersMode;
